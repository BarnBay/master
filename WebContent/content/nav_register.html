<div class="container" id="wrap">
	<div class="row">
		<div class="col-md-6 col-md-offset-3">
			<form id="navRegisterForm" accept-charset="utf-8" role="form">
				<legend>
					Sign Up
					<h4>Join our BarnBay community - It's free!</h4>
				</legend>
				
				<p>
					<h4>Please choose!</h4>
					<select class="form-control" id="navRegisterType">
						<option value="CUSTOMER">Customer</option>
						<option value="FARMER">Farmer</option>
					</select>
				</p>
				
				<br />

				<p>
					<label>Gender : </label>
					<label class="radio-inline">
						<input type="radio" name="navRegisterGender" value="Herr" checked="checked"/> Male
					</label> 
					<label class="radio-inline">
						<input type="radio" name="navRegisterGender" value="Frau"/> Female
					</label> 
				</p>
								
				<div class="row">
					<div class="col-xs-6 col-md-6">
						<p>
							<input type="text" name="firstname" id="navRegisterFirstname" value="" class="form-control input-md" placeholder="First Name" required />
						</p>
					</div>
					<div class="col-xs-6 col-md-6">
						<p>
							<input type="text" name="lastname" id="navRegisterLastname" value="" class="form-control input-md" placeholder="Last Name" required />
						</p>
					</div>
				</div>

				<p>
					<input type="text" name="email" id="navRegisterEmail" value="" class="form-control input-md" placeholder="Your Email" required />
				</p>

				<p>
					<input type="password" name="password" id="navRegisterPassword" value="" class="form-control input-md" placeholder="Password" required />
				</p>

				<p>
					<input type="password" name="confirm_password" value="" class="form-control input-md" placeholder="Confirm Password" required />
				</p>

				<p>
					<input type="text" name="state" id="navRegisterState" value="" class="form-control input-md" placeholder="State/Province" />
				</p>

				<p>
					<input type="text" name="city" id="navRegisterCity" value="" class="form-control input-md" placeholder="City" />
				</p>

				<p>
					<input type="text" name="zip" id="navRegisterZip" value="" class="form-control input-md" placeholder="ZIP/Postal code" />
				</p>

				<p>
					<input type="text" name="address" id="navRegisterAddress" value="" class="form-control input-md" placeholder="Address" />
				</p>

				<p>
					<input type="text" name="phone" id="navRegisterPhone" value="" class="form-control input-md" placeholder="Phone" />
				</p>

				<br /> 
				<br />
				<button class="btn btn-lg btn-success btn-block signup-btn" type="submit">Create my account</button>
				
				<span class="help-block">By clicking Create my account, you
					agree to our Terms and that you have read our Data Use Policy,
					including our Cookie Use.</span>
			</form>
		</div>
	</div>
</div>

<div id="testProduct">
	
</div>

<script type="text/javascript">
	$("#navRegisterForm").submit(function(event) {
		event.preventDefault();
		
		var test = JSON.stringify({
			"usertype":$('#navRegisterType').val(),
			"title":$('input[name=navRegisterGender]:checked', '#navRegisterForm').val(),
			"firstname":$('#navRegisterFirstname').val(),
			"lastname":$('#navRegisterLastname').val(),
			"email":$('#navRegisterEmail').val(),
			"username":$('#navRegisterEmail').val(),
			"passwordhash":$('#navRegisterPassword').val(),
			"town":$('#navRegisterCity').val(),
			"zip":$('#navRegisterZip').val(),
			"street":$('#navRegisterAddress').val(),
			"number":$('#navRegisterPhone').val()
		});
		
		document.getElementById("testProduct").innerHTML = test;
		
		$.ajax({
			type: "POST",
			url: "/barnbay_ui/Register",
			dataType : "json",
			data: JSON.stringify({
				"usertype":$('#navRegisterType').val(), // FARMER AND CUSTOMER ???
				"title":$('input[name=navRegisterGender]:checked', '#navRegisterForm').val(),
				"firstname":$('#navRegisterFirstname').val(),
				"lastname":$('#navRegisterLastname').val(),
				"email":$('#navRegisterEmail').val(),
				"username":$('#navRegisterEmail').val(),
				"passwordhash":$('#navRegisterPassword').val(),
				"town":$('#navRegisterCity').val(),
				"zip":$('#navRegisterZip').val(),
				"street":$('#navRegisterAddress').val(),
				"number":$('#navRegisterPhone').val()
			}),
			success:function(data) {
				if(data.register == "success") {
					$('#navRegisterModalSuccess').modal('show');	
				} else {
					alert("Reason:" + data.reason);
					if(data.reason == "exists") {
						$('#navRegisterModalExists').modal('show');	
					} else {
						$('#navRegisterModalSQL').modal('show');
					}
				}
			}, error: function(data) {
				//alert(JSON.stringify(data));
			}
		});
	});
</script>

<!-- Register Success -->
<div class="modal fade" id="navRegisterModalSuccess" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
  			<div class="modal-header">
    			<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
    			<h4 class="modal-title" id="myModalLabel">Successfully Registered</h4>
  			</div>
  			<div class="modal-body">
    			You have been successfully registered to our BarnBay Community.
    			Please check your E-Mail Address to complete the registration process.
  			</div>
  			<div class="modal-footer">
    			<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
  			</div>
		</div>
	</div>
</div>

<!-- Register Failed: User already exists -->
<div class="modal fade" id="navRegisterModalExists" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
  			<div class="modal-header">
    			<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
    			<h4 class="modal-title" id="myModalLabel">User already exists</h4>
  			</div>
  			<div class="modal-body">
    			We are sorry but the User you want to create already exists. Please change the your E-Mail Address
  			</div>
  			<div class="modal-footer">
    			<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
  			</div>
		</div>
	</div>
</div>

<!-- Register Failed: SQL Error -->
<div class="modal fade" id="navRegisterModalSQL" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
  			<div class="modal-header">
    			<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
    			<h4 class="modal-title" id="myModalLabel">Something went wrong!</h4>
  			</div>
  			<div class="modal-body">
    			We are sorry but something went wrong, please check again later.
  			</div>
  			<div class="modal-footer">
    			<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
  			</div>
		</div>
	</div>
</div>