<script type="text/javascript">	
	var LocationDetailJSONObject;
	
	$.ajax({
		url: "/barnbay_ui/GetBarnbayByBarnbayId?id=" + $.cookie("Location.LocationListCategoryID")
	}).done(function(data) {
		LocationDetailJSONObject = JSON.parse(data);		
		LocationDetailFunction(LocationDetailJSONObject);
		
		startMap(LocationDetailJSONObject.address.street + ' ' + LocationDetailJSONObject.address.number + ', ' + LocationDetailJSONObject.address.zipcode + ' ' + LocationDetailJSONObject.address.city, LocationDetailJSONObject.name);
	});
</script>

<div class="row" id="locationDetailInformation">
	<script type="text/javascript">
		function LocationDetailFunction(LocationDetailObject) {
			var out = "";
			out += '<div class="col-md-12" style="font-family: \'Roboto Condensed\', sans-serif;">';
			out += '	<div class="col-md-3" id="leftCol">';
			out += '		<h3>' + LocationDetailObject.name + '</h3>';
			out += '		<div class="panel panel-success">';
			out += '			<div class="panel-heading">';
			out += '				<span class="glyphicon glyphicon-pushpin" aria-hidden="true"></span> Address';
			out += '			</div>';
			out += '			<div class="panel-body">';
			out += '				<address>';
			out += '					' + LocationDetailObject.address.street + ' ' + LocationDetailObject.address.number + '<br/>'
			out += '					' + LocationDetailObject.address.zipcode + ' ' + LocationDetailObject.address.city + '<br/><br/>';
			out += '					<strong>Barnbay opening hours:</strong><br/>' + LocationDetailObject.opening_hours;
			out += '				</address>';
			out += '			</div>';
			out += '		</div>';
			out += '	</div>';
			out += '	<div class="col-md-9">';
			out += '		<div style="width: 100%; height: 270px; overflow: hidden">';
			out += '			<img src="./img/locations/' + LocationDetailObject.name + '.png" alt="Image" class="img-responsive center-block" width="100%" height="350">';
			out += '		</div>';
			out += '		<div id="barnbayDetailImageInfo">';
			out += '			<h4>' + LocationDetailObject.description + '</h4>';
			out += '		</div>';
			out += '	</div>';
			out += '</div>';
			out += '<div class="col-md-12"><hr></div>';
			out += '<div class="col-md-12">';
			out += '	<div class="panel panel-success">';
			out += '		<div class="panel-heading">';
			out += '			<span class="glyphicon glyphicon-map-marker" aria-hidden="true"></span> BarnBay pickup Locations';
			out += '		</div>';
			out += '		<div class="panel-body">';
			out += '			<div id="map_barnbay_canvas" style="width: 100%; height: 480px;"></div>';
			out += '		</div>';
			out += '	</div>';
			out += '</div>';
			
			document.getElementById("locationDetailInformation").innerHTML = out;
		}
	</script>
</div>

<!-- Google Maps Scripte -->
<script type="text/javascript">
	var markerBounds, geocoder, map;
	
	function startMap(address, title) {
		
 		var mapOptions = {
     		zoom: 12,
     		disableDefaultUI: true,
     	    mapTypeId: google.maps.MapTypeId.ROADMAP
    	}
 		
 	  	geocoder = new google.maps.Geocoder();
 		markerBounds = new google.maps.LatLngBounds();
 	    map = new google.maps.Map(document.getElementById("map_barnbay_canvas"), mapOptions);

 	  	geocoder.geocode({'address': address}, function(results, status) {
	 	  	if(status == google.maps.GeocoderStatus.OK) {
	 	  		map.setCenter(results[0].geometry.location);
	 	  		var marker = new google.maps.Marker({
	 	  			map: map,
	 	  			position: results[0].geometry.location
	 	  		});
	 	  		
	 	  		var infowindow = new google.maps.InfoWindow({
	 	  			content: '<div style="width: 150px;"><h4>' + title + '</h4></div>'
  	  	  		});
	 	  		
	 	  		google.maps.event.addListener(marker, 'click', function() {
					infowindow.open(map, marker);
				});
	 	  		
	 	  		markerBounds.extend(results[0].geometry.location);
				map.fitBounds(markerBounds);
			} else {
	 	    	alert("Geocode was not successful for the following reason: " + status);
	 	   	}
		});
  	}
</script>