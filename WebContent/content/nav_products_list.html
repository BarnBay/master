<!-- Implement the JSON Script File for the Product list -->
<script type="text/javascript">
	var ProductListJSONObject;
	var ListOrGridView = "GridView";
	
	$.ajax({
		url: "/barnbay_ui/GetAllSubCategories"
	}).done(function(data) {
		ProductListJSONObject = JSON.parse(data);
		
		countProductListFruits(ProductListJSONObject);
		countProductListVegetables(ProductListJSONObject);
		countProductListMeat(ProductListJSONObject);
		countProductListFunction(ProductListJSONObject);
		productListFunction(ProductListJSONObject);
	});
</script>
<!-- End of Implementation -->

<div class="row">
	<!-- Searchbar at the top -->
	<div class="col-lg-12 col-md-12 col-sm-12">
		<div class="input-group">
			<input type="text" class="form-control" placeholder="Search for Products..." id="searchInput">
			<div class="input-group-btn">
				<button class="btn btn-default" type="submit"><span class="glyphicon glyphicon-search"></span></button>
			</div>
		</div>
	</div>

	<!-- Left Column -->
	<div class="col-lg-3 col-md-3 col-sm-12" style="margin-top: 20px;">
		<div class="panel-group" role="tablist" id="accorionNo">
			<!-- Category -->
			<div class="panel panel-default" id="panelProducts">
				<div class="panel-heading" role="tab">
					<h4 class="panel-title">
						<a class="accordion-toggle" data-toggle="collapse" href="#collapseListGroupCategory" aria-expanded="true" aria-controls="collapseListGroupCategory">Category</a>
					</h4>
				</div>
				<div id="collapseListGroupCategory" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="collapseListGroupCategory" aria-expanded="true">
					<ul class="list-group checkbox">
          				<li class="list-group-item productCheckbox"><input type="checkbox" onclick="productFilterCategory(this, 1)"> Fruits 
          					<span id="countProducts_Fruits" class="badge pull-right">
	          					<script>				
									function countProductListFruits(productArray) {
										var i;
										var p = 0;
										for(i = 0; i < productArray.length; i++) {
											if(productArray[i].super_category == 1) {
												p++;		
											}	
										}
										document.getElementById("countProducts_Fruits").innerHTML = p;
									}
								</script>
          					</span>
          				</li>
          				<li class="list-group-item productCheckbox"><input type="checkbox" onclick="productFilterCategory(this, 2)"> Vegetables 
	          				<span id="countProducts_Vegetables" class="badge pull-right">
	          					<script>				
									function countProductListVegetables(productArray) {
										var i;
										var p = 0;
										for(i = 0; i < productArray.length; i++) {
											if(productArray[i].super_category == 2) {
												p++;		
											}	
										}
										document.getElementById("countProducts_Vegetables").innerHTML = p;
									}
								</script>
	          				</span>
          				</li>
          				<li class="list-group-item productCheckbox" id="productCheckbox"><input type="checkbox" onclick="productFilterCategory(this, 3)"> Meat 
          					<span id="countProducts_Meat" class="badge pull-right">
          						<script>				
									function countProductListMeat(productArray) {
										var i;
										var p = 0;
										for(i = 0; i < productArray.length; i++) {
											if(productArray[i].super_category == 3) {
												p++;		
											}	
										}
										document.getElementById("countProducts_Meat").innerHTML = p;
									}
								</script>
          					</span>
          				</li>
        			</ul>
      			</div>
			</div><!-- end of category -->
			
			<!-- Price -->
			<div class="panel panel-default">
				<div class="panel-heading" role="tab">
					<h4 class="panel-title">
						<a class="accordion-toggle" data-toggle="collapse" href="#collapseListGroupPrice" aria-expanded="true" aria-controls="collapseListGroupPrice">Price</a>
					</h4>
				</div>
				<div id="collapseListGroupPrice" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="collapseListGroupPrice" aria-expanded="true">
					<ul class="list-group">
          				<li class="list-group-item">
          					<p class="input-group">
							  	<input type="text" name="low" id="productsPriceLow" class="form-control input-sm" placeholder="low">
							  	<span class="input-group-addon">&euro;</span>
							</p>
         					<p class="input-group">
  								<input type="text" name="high" id="productsPriceHigh" class="form-control input-sm" placeholder="high">
  								<span class="input-group-addon">&euro;</span>
							</p>
							<p>
								<button class="btn btn-sm btn-success btn-block signup-btn" type="submit"><b>Go</b></button>
							</p>
          				</li>
        			</ul>
      			</div>
			</div><!-- end of price -->	
		</div>
	</div><!-- end left column -->
	
	<!-- Right Column -->
	<div class="col-lg-9 col-md-9 col-sm-12" style="margin-top: 20px;">
		<!-- <img src="http://placehold.it/1000x300" class="img-responsive" alt="Responsive image">  -->
				
		<div class="well well-sm">
			Showing <strong id="countProducts"></strong> Products
			<script>				
				function countProductListFunction(productArray) {
					document.getElementById("countProducts").innerHTML = productArray.length;
				}
			</script>
						
			<div class="pull-right">
				<!-- List or Grid View -->
				<div class="btn-group pull-right" style="margin-top: -5px;">
	        		<a href="#" id="productList" class="btn btn-default btn-sm"><span class="glyphicon glyphicon-th-list"></span></a> 
	        		<a href="#" id="productGrid" class="btn btn-default btn-sm active"><span class="glyphicon glyphicon-th"></span></a>
	        	</div>
	        	
	        	<!-- Sort by: Default -->
				<div class="form-group pull-right" style="margin-right: 20px;">
					<label for="text" style="float:left; font-weight: normal; margin-right: 10px;">Sort by:</label>       
					<div class="input-group" style="margin-top: -5px;">   
						<select class="form-control input-sm" id="selectNavProdutsList">
							<option value="idcategory,ASC">Default</option>
							<option value="name,ASC">Name: A-Z</option>
							<option value="name,DESC">Name: Z-A</option>
							<option value="pPrice,ASC">Price: low to high</option>
							<option value="pPrice,DESC">Price: high to low</option>
						</select>                                    
					</div>   
				</div>
				
        	</div> 		
		</div>
		
		<div id="products" class="row list-group">
			<!-- JSON - Create the Product List -->
			<script>							
				function productListFunction(productArray) {
				    var out = "";
				    var i;
				    for(i = 0; i < productArray.length; i++) {
				    	if(ListOrGridView == "GridView") {
					    	out += '<div class="col-md-4 col-lg-4">';
					    	out += '	<div class="thumbnail">';
					    	out += '		<img class="group gridview-group-image" id="productDetailView" src="./img/products/' + productArray[i].name + '.png" alt="" onclick="productGetDetailedProductInfo(' + productArray[i].idcategory + ')"/>';
					    	out += '		<div class="gridview-group-item-caption">';
					    	out += '			<div class="gridview-group-item-heading" id="productDetailView" style="cursor:pointer;" onclick="productGetDetailedProductInfo(' + productArray[i].idcategory + ')">';
					    	out += '				' + productArray[i].name;
					    	out += '			</div>';
					    	out += '			<div class="gridview-group-item-text">';
					    	out += '				' + productArray[i].category_description;
					    	out += '			</div>';
					    	out += '			<div class="gridview-group-item-price">';
					    	out += '				' + (productArray[i].price).toFixed(2) + ' &euro;';
					    	out += '			</div>';
					    	out += '		</div>';
					    	out += '	</div>';
					    	out += '</div>';
				    	} else {
					    	out += '<div class="col-md-12 col-lg-12">';
					    	out += '	<div class="listview col-md-12"></div>';
					    	out += '	<div class="col-md-4">';
					    	out += '		<img class="group listview-group-small-image" id="productDetailView" src="./img/products/' + productArray[i].name + '.png" alt="" onclick="productGetDetailedProductInfo(' + productArray[i].idcategory + ')"/>';
					    	out += '	</div>';
					    	out += '	<div class="col-md-8">';
					    	out += '		<div class="listview-group-item-caption">';
					    	out += '			<div class="listview-group-item-heading" id="productDetailView" style="cursor:pointer;" onclick="productGetDetailedProductInfo(' + productArray[i].idcategory + ')">';
					    	out += '				' + productArray[i].name;
					    	out += '			</div>';
					    	out += '			<div class="listview-group-item-text">';
					    	out += '				' + productArray[i].category_description;
					    	out += '			</div>';
					    	out += '			<div class="listview-group-item-price">';
					    	out += '				' + (productArray[i].price).toFixed(2) + ' &euro;';
					    	out += '			</div>';
					    	out += '		</div>';
					    	out += '	</div>';
					    	out += '</div>';
				    	}
			    	}
			    
			    	document.getElementById("products").innerHTML = out;
				}
			</script>
			<!-- JSON END -->
		</div>

	</div><!-- end right column -->
</div><!-- end row -->

<!-- Filter Products, will be removed an added to script.js later -->
<script type="text/javascript">
	function productFilterCategory(element, categoryid) {
		if(element.checked) {
			$.ajax({
				url: "/barnbay_ui/GetSubCategoriesByCategoryId?id=" + categoryid
			}).done(function(result) {
				ProductListFilterJSONObject = JSON.parse(result);
				
				productListFunction(ProductListFilterJSONObject);
			});
		} else {
			$.ajax({
				url: "/barnbay_ui/GetAllSubCategories"
			}).done(function(result) {
				ProductListFilterJSONObject = JSON.parse(result);
				
				productListFunction(ProductListFilterJSONObject);
			});	
		}		
	}
	
	/* Display Detailed Information about the Product */
	function productGetDetailedProductInfo(categoryid) {
		$.cookie("Product.ProductListCategoryID", categoryid, { expires: 1 });
	}
</script>